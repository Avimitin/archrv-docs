<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.14">
<title data-react-helmet="true">å¥‡å¥‡æ€ªæ€ªçš„é”™è¯¯ä»¬ | Arch Linux RISC-V Packaging Guide</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://riscv-notes.sh1mar.in/docs/record/collection"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="å¥‡å¥‡æ€ªæ€ªçš„é”™è¯¯ä»¬ | Arch Linux RISC-V Packaging Guide"><meta data-react-helmet="true" name="description" content="é˜¿é‡Œäº‘ä¸Šé‡åˆ° sigsegv"><meta data-react-helmet="true" property="og:description" content="é˜¿é‡Œäº‘ä¸Šé‡åˆ° sigsegv"><link data-react-helmet="true" rel="icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://riscv-notes.sh1mar.in/docs/record/collection"><link data-react-helmet="true" rel="alternate" href="https://riscv-notes.sh1mar.in/docs/record/collection" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://riscv-notes.sh1mar.in/docs/record/collection" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.da6dd648.css">
<link rel="preload" href="/assets/js/runtime~main.4a9f3433.js" as="script">
<link rel="preload" href="/assets/js/main.760832d3.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.png" alt="ArchRV-Logo" class="themedImage_TMUO themedImage--light_4Vu1"><img src="/img/logo.png" alt="ArchRV-Logo" class="themedImage_TMUO themedImage--dark_uzRr"></div><b class="navbar__title">ArchRV-Manual</b></a><a class="navbar__item navbar__link navbar__link--active" href="/docs/intro">Documents</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/felixonmars/archriscv-packages" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_iYfV toggle_2i4l toggleDisabled_xj38"><div class="toggleTrack_t-f2" role="button" tabindex="-1"><div class="toggleTrackCheck_mk7D"><span class="toggleIcon_pHJ9">ğŸŒœ</span></div><div class="toggleTrackX_dm8H"><span class="toggleIcon_pHJ9">ğŸŒ</span></div><div class="toggleTrackThumb_W6To"></div></div><input type="checkbox" class="toggleScreenReader_h9qa" aria-label="Switch between dark and light mode"></div><div class="navbar__search searchBarContainer_I7kZ"><input placeholder="Search" aria-label="Search" class="navbar__search-input"><div class="loadingRing_Zg7X searchBarLoadingRing_J5Ez"><div></div><div></div><div></div><div></div></div><div class="searchHintContainer_CDc6"><kbd class="searchHint_2RRg">ctrl</kbd><kbd class="searchHint_2RRg">K</kbd></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_lDyR"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_i9tI" type="button"></button><aside class="docSidebarContainer_0YBq"><div class="sidebar_a3j0"><nav class="menu thin-scrollbar menu_cyFh"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/intro">RISC-V æ‰“åŒ…æŒ‡å¼•</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/docs/guide/start-guide">Guide</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active hasHref_TwRn" href="/docs/record/collection">Record</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/record/collection">å¥‡å¥‡æ€ªæ€ªçš„é”™è¯¯ä»¬</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/record/resources">ä¸€äº›å‚è€ƒèµ„æ–™</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/record/rust-related">Rust ç›¸å…³çš„ä¸€äº›è®°å½•</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/record/unstable">éšæ—¶ä¼šè¿‡æ—¶çš„è®°å½•</a></li></ul></li></ul></nav></div></aside><main class="docMainContainer_r8cw"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_zHA2"><div class="docItemContainer_oiyr"><article><div class="tocCollapsible_aw-L theme-doc-toc-mobile tocMobile_Tx6Y"><button type="button" class="clean-btn tocCollapsibleButton_zr6a">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>å¥‡å¥‡æ€ªæ€ªçš„é”™è¯¯ä»¬</h1></header><h2 class="anchor anchorWithStickyNavbar_y2LR" id="é˜¿é‡Œäº‘ä¸Šé‡åˆ°-sigsegv">é˜¿é‡Œäº‘ä¸Šé‡åˆ° sigsegv<a class="hash-link" href="#é˜¿é‡Œäº‘ä¸Šé‡åˆ°-sigsegv" title="Direct link to heading">â€‹</a></h2><p>å¦‚æœåœ¨é˜¿é‡Œäº‘ä¸Šé‡åˆ°å¥‡å¥‡æ€ªæ€ªçš„ <code>segmentation fault</code>ï¼Œ
é¦–å…ˆç¡®è®¤ rustc çš„<a href="/docs/record/rust-related#%E7%BC%96%E8%AF%91%E6%97%B6%E9%81%87%E5%88%B0%E4%BA%86%E5%A5%87%E6%80%AA%E7%9A%84-sigsegv">ä¼˜åŒ–</a>
æœ‰æ— é—®é¢˜ï¼Œå¦‚æœæŸ¥ä¸å‡ºæ¥é—®é¢˜çš„è¯ï¼Œ
é»˜è®¤è®¤ä¸ºé˜¿é‡Œäº‘çš„è™šæ‹ŸåŒ–æœ‰é—®é¢˜ã€‚</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="æŠŠ-jemallocator-æ¢æˆ-tikv-jemallocator">æŠŠ jemallocator æ¢æˆ tikv-jemallocator<a class="hash-link" href="#æŠŠ-jemallocator-æ¢æˆ-tikv-jemallocator" title="Direct link to heading">â€‹</a></h2><p>Read: <a href="https://github.com/meilisearch/MeiliSearch/pull/1692" target="_blank" rel="noopener noreferrer">https://github.com/meilisearch/MeiliSearch/pull/1692</a></p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="executable-wasm-ld-doesnt-exist-stuck">Executable &quot;wasm-ld&quot; doesn&#x27;t exist! (STUCK)<a class="hash-link" href="#executable-wasm-ld-doesnt-exist-stuck" title="Direct link to heading">â€‹</a></h2><p>è¦å®‰è£… lldï¼Œwasm-ld åªåœ¨ lld é‡Œé¢æœ‰ã€‚</p><hr><p>Firefox çš„è¯ï¼Œå¼•å…¥ lld ä¼šå¸¦æ¥å¦å¤–çš„é—®é¢˜ã€‚lld æ˜¯éœ€è¦é»˜è®¤å…³é—­çš„ï¼Œ
é—®é¢˜æ¥æºäº <code>-mno-relax</code> å’Œ <code>-mrelax</code> ã€‚</p><p>å¯ä»¥æŸ¥çœ‹è¿™ä¸ª PR äº†è§£è¯¦æƒ… <a href="https://github.com/felixonmars/archriscv-packages/pull/139" target="_blank" rel="noopener noreferrer">https://github.com/felixonmars/archriscv-packages/pull/139</a></p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="pthread-related-issue">pthread related issue<a class="hash-link" href="#pthread-related-issue" title="Direct link to heading">â€‹</a></h2><p>å¦‚æœæ˜¯ pthread å¼•èµ·çš„ atomic å¼•ç”¨æœ€å¥½æ‰¾ <code>-lpthread</code> æ›¿æ¢æˆ <code>-pthread</code>ã€‚</p><p>gcc/clangåº”è¯¥ä»åå‡ å¹´å‰å°±è¦æ±‚ç”¨ -pthread äº†ï¼Œç°åœ¨è¿˜æ®‹ç•™çš„ -lpthread
ç»å¤§å¤šæ•°æ˜¯å†™é”™äº†ã€‚</p><p>ç»™ä¸Šæ¸¸æäº¤çš„æ—¶å€™å¯ä»¥è¯´ï¼š</p><div class="codeBlockContainer_J+bg language-text theme-code-block"><div class="codeBlockContent_csEI text"><pre tabindex="0" class="prism-code language-text codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">This has been already discussed lengthly in GCC.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">The answer is that -lpthead is only linking with the thread library,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">while -pthread actually means enabling thread support,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">which includes in the case of riscv64 -latomic,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">but also correctly define some macros when compiling code.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">In short this is not considered as a GCC bug.</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>StackOverflow ä¹Ÿæœ‰ç›¸å…³è®¨è®ºï¼š
<a href="https://stackoverflow.com/questions/23250863/difference-between-pthread-and-lpthread-while-compiling" target="_blank" rel="noopener noreferrer">https://stackoverflow.com/questions/23250863/difference-between-pthread-and-lpthread-while-compiling</a></p><hr><p>å…³äºå¦‚ä½•è·Ÿä¸Šæ¸¸å¯¹çº¿çš„å‚è€ƒï¼š
<a href="https://github.com/juce-framework/JUCE/issues/995" target="_blank" rel="noopener noreferrer">https://github.com/juce-framework/JUCE/issues/995</a></p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="gcc-atomic">gcc atomic<a class="hash-link" href="#gcc-atomic" title="Direct link to heading">â€‹</a></h2><p>gcc çš„ 1B 2B atomic å®ç°åœ¨ riscv64 æœ‰é—®é¢˜ã€‚gcc çš„ 1B 2B atomic å®ç°éœ€è¦è·‘åˆ° libatomicï¼Œ
äºæ˜¯æ²¡æ³•åœ¨ç¼–è¯‘æœŸåˆ¤æ–­æ˜¯å¦æ— é”</p><blockquote><p>ref: <a href="https://code.videolan.org/videolan/vlc/-/issues/20683" target="_blank" rel="noopener noreferrer">https://code.videolan.org/videolan/vlc/-/issues/20683</a></p><p>The GCC docs make it clear that -pthread is the correct way to use the pthread
library on POSIX systems.  Not only does it add extra necessary linker options
for some targets, but it also adds some extra necessary preprocessor options
for many targets.  There is also the issue that the library is called -lpthread
on some systems, and -lpthreads on others.  The -pthread option handles this
correctly.</p><p><strong>It is a known problem that the RISC-V gcc atomic support needs more work.
RISC-V only supports 4 and 8 byte atomic operations in hardware.  1 and 2 byte
operations are implemented using instruction sequences with locks, and this is
currently done via a call into libatomic.</strong>  However, mixing lock free and
non-locking atomic sequences can potentially cause run-time failures.  We need
to instead emit instruction sequences using 4 and/or 8 byte atomic instructions
without locks.  This is on the list of things that need to be fixed, but there
are a lot of things that need to be fixed and we haven&#x27;t gotten around to
fixing this one yet.  This definitively needs to be fixed before gcc 9, and
hopefully much sooner than that.</p><p>While the RISC-V gcc port does need to be fixed, it is still true that you
should be using -pthread instead of -lpthread.</p></blockquote><p>é™¤æ­¤ä¹‹å¤–è¿˜æœ‰ä¸€ä¸ªå¾ˆè¯¡å¼‚çš„äº‹æƒ…ï¼šå°±æ˜¯åœ¨ gcc é‡Œï¼Œ<code>std::atomic&lt;bool&gt;::is_always_lock_free</code>
æ˜¯ falseï¼Œ<code>std::atomic&lt;int&gt;::is_always_lock_free</code> æ˜¯ trueã€‚ä½†æ˜¯å¦‚æœä½ åœ¨è¿è¡Œçš„æ—¶å€™
æ•´ä¸€ä¸ª bool b; <code>std::atomic_is_lock_free(&amp;b)</code>ï¼Œä½ ä¼šå‘ç°å®ƒæ˜¯ trueï¼Œè€Œä¸”æ˜¯ï¼Œä¸ç®¡æ€ä¹ˆè¯•ï¼Œ
åœ¨å“ªè¯•ï¼Œå®ƒéƒ½æ˜¯ trueã€‚</p><p>åœ¨ gcc é‡Œé¢å¤§æ¦‚ ATOMIC_BOOL_LOCK_FREE æ˜¯ 1ï¼ˆ1 for the built-in atomic types
that are sometimes lock-free)</p><blockquote><p>ref: <a href="https://www.mail-archive.com/gcc-bugs@gcc.gnu.org/msg664254.html" target="_blank" rel="noopener noreferrer">https://www.mail-archive.com/gcc-bugs@gcc.gnu.org/msg664254.html</a></p><p>tldr: åªèƒ½ç­‰ gcc çš„äººå®ç° sub-word lock-free atomic äº†</p><p>All atomic types except for std::atomic_flag may be implemented using mutexes
or other locking operations, rather than using the lock-free atomic CPU
instructions. Atomic types are also allowed to be sometimes lock-free, e.g. if
only aligned memory accesses are naturally atomic on a given architecture,
misaligned objects of the same type have to use locks.</p><p>Thanks for the detailed writeup!</p><p>Your analysis is basically correct, but I would add that ICC&#x27;s behavior here is
unsound (it only appears to &quot;implement[] this behavior correctly&quot; in simple cases)
whereas the GCC/Clang behavior is sound but surprising. For GCC, ICC, and Clang, <code>identity &lt;fp&gt;</code>
and <code>identity&lt;float&gt;</code> are the same type. Therefore it&#x27;s not possible for <code>identity &lt;fp&gt;::type</code>
and <code>identity&lt;float&gt;::type</code> to have different alignments, because they&#x27;re
the same type. So, for an example such as this:</p></blockquote><div class="codeBlockContainer_J+bg language-cpp theme-code-block"><div class="codeBlockContent_csEI cpp"><pre tabindex="0" class="prism-code language-cpp codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">typedef</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">float</span><span class="token plain"> fp  </span><span class="token function" style="color:#d73a49">__attribute__</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">aligned</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">16</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">std</span><span class="token operator" style="color:#393A34">::</span><span class="token plain">cout </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">alignof</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">typename</span><span class="token plain"> </span><span class="token class-name">identity</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">fp</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token operator" style="color:#393A34">::</span><span class="token plain">type</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token plain"> std</span><span class="token operator" style="color:#393A34">::</span><span class="token plain">endl</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">std</span><span class="token operator" style="color:#393A34">::</span><span class="token plain">cout </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">alignof</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">typename</span><span class="token plain"> </span><span class="token class-name">identity</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token keyword" style="color:#00009f">float</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token operator" style="color:#393A34">::</span><span class="token plain">type</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token plain"> std</span><span class="token operator" style="color:#393A34">::</span><span class="token plain">endl</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><blockquote><p>under GCC and Clang, both lines print out 4, whereas under ICC, they either both
print out 4 or both print out 16 depending on which one happens to appear first
in the program (and in general you can encounter ODR violations when using ICC despite
there being nothing wrong at the source level).</p></blockquote><blockquote><p>Fundamentally, the &#x27;aligned&#x27; attribute is a GCC extension, so the GCC folks get
to define how it works. And they chose that instead of it resulting in a different
type that&#x27;s <em>almost</em> like the original type (for example, treating it as a type
qualifier), it results in the same type, but that in some contexts that same type
behaves differently. That&#x27;s a semantic disaster, but it&#x27;s what we live with. And
in particular, the only way for template instantiation to be sound in the presence
of this semantic disaster is for it to ignore all such attributes on template type
arguments.</p></blockquote><h2 class="anchor anchorWithStickyNavbar_y2LR" id="-fno-common">-fno-common<a class="hash-link" href="#-fno-common" title="Direct link to heading">â€‹</a></h2><p><strong>Q</strong>: -fno-common å–ä»£äº† -fcommon, è¿™ç§æƒ…å†µä¼˜å…ˆ -fno-common è¿˜æ˜¯ patch sourceï¼Ÿ</p><p><strong>A</strong>: ä¼˜å…ˆ patch sourceã€‚
ä¸€èˆ¬æ¥è¯´èƒ½ä¸åŠ¨flagså°½é‡ä¸åŠ¨ã€‚
å°‘æ•°ä¾‹å¤–æ˜¯ï¼Œæ¯”å¦‚ï¼Œè¿™ä¸ªé¡¹ç›®æ­»äº†åå¹´äº†ï¼Œè¿ä¸ªrepoéƒ½æ‰¾ä¸åˆ°ã€‚</p><p>ä¸è¿‡å¦‚æœæ˜¯ -fcommon è¿™ç§ï¼Œæ¯”è¾ƒæ¨èçš„æ˜¯å…ˆæç»™ä¸Šæ¸¸ï¼Œå’±ä»¬patchç€æ‰“ã€‚
è¿™æ ·ä¸‹æ¬¡ä¸Šæ¸¸å‘ç‰ˆæœ¬arché‚£è¾¹æ›´æ–°çš„æ—¶å€™ï¼Œå°±ä¼šè«åå…¶å¦™å¥½äº†ï¼Œä»–ä»¬ä¸ç”¨åšä»€ä¹ˆï¼Œæˆ‘ä»¬ä¹Ÿåªç”¨åˆ æ‰patchã€‚</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="-wno-format">-Wno-format<a class="hash-link" href="#-wno-format" title="Direct link to heading">â€‹</a></h2><p>å¦‚æœé‡åˆ°
<code>cc1: error: -Wformat-security ignored without -Wformat [-Werror=format-security]</code>ï¼Œ
è¿™ä¸ªé”™è¯¯æ˜¯å› ä¸ºä»£ç è¢«ç¼–è¯‘çš„æ—¶å€™ï¼Œ<code>CFLAG</code> é€‰é¡¹å¤šäº†ä¸€ä¸ª <code>-Wno-format</code>ï¼Œè¿™ä¸ªé€‰é¡¹ä¼šå…³é—­
<code>-Wformat</code>ï¼Œä½† <code>-Werror=format-security</code> ä»ç„¶ä¿ç•™ç€ã€‚</p><p>è§£å†³æ–¹æ¡ˆé¦–å…ˆæ˜¯è®©ä¸Šæ¸¸ä¿®ï¼Œç„¶åå¼•ç”¨ patchï¼Œå‚è€ƒä¸Šé¢é‚£ä¸€ç« èŠ‚ã€‚</p><p>å¦‚æœæ˜¯ä¸€ä¸‡å¹´ä¸æ›´æ–°çš„ä»£ç ä»“åº“ï¼Œé‚£å¯ä»¥é…Œæƒ…ä½¿ç”¨
<code>${CFLAG#-Werror=format-security}</code> æˆ–è€… <code>sed -i &#x27;s/ -Werror=format-security // Makefile</code>
æŠŠè¿™ä¸ªé€‰é¡¹åˆ é™¤ã€‚</p><p>ä½†æ˜¯å°½é‡ç°åœ¨ç¾¤é‡Œè®¨è®ºï¼Œé—®é—®å‰è¾ˆçš„æ„è§ã€‚</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="-werrorformat-security">-Werror=format-security<a class="hash-link" href="#-werrorformat-security" title="Direct link to heading">â€‹</a></h2><div class="codeBlockContainer_J+bg language-text theme-code-block"><div style="color:#393A34;background-color:#f6f8fa" class="codeBlockTitle_oQzk">manpage</div><div class="codeBlockContent_csEI text"><pre tabindex="0" class="prism-code language-text codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">-Wformat-security</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   If -Wformat is specified, also warn about uses of format functions that represent possible security problems.  At present, this warns about calls to &quot;printf&quot; and &quot;scanf&quot; functions where the</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   format string is not a string literal and there are no format arguments, as in &quot;printf (foo);&quot;.  This may be a security hole if the format string came from untrusted input and contains %n.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   (This is currently a subset of what -Wformat-nonliteral warns about, but in future warnings may be added to -Wformat-security that are not included in -Wformat-nonliteral.)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>é¦–å…ˆï¼Œä¼˜å…ˆç»™ä¸Šæ¸¸å‘è¡¥ä¸ã€‚ä» manpage ä¹Ÿå¯ä»¥çœ‹çš„å‡ºæ¥ï¼Œåªéœ€è¦æŠŠ <code>printf</code> æ”¹æˆ <code>printf(&quot;%s&quot;)</code> çš„å½¢å¼å³å¯ã€‚</p><p>é™¤éä¸Šæ¸¸åå¤šå¹´æ²¡åŠ¨é™ï¼Œæ‰å¯ä»¥é€‰æ‹©æŠŠè¿™ä¸ªé€‰é¡¹åˆ æ‰ã€‚
å¯ä»¥ç”¨ï¼š <code>CFLAGS=${CFLAGS/-Werror=format-security/}</code></p><p>å¦‚æœä¸Šæ¸¸å¾ˆéš¾æ²Ÿé€šï¼Œæˆ–è€…ä¸Šæ¸¸ä»£ç ä¸å¤ªå¥½ä¿®ï¼Œä¼˜å…ˆè‡ªå·±ä¿®ï¼Œç„¶åå’Œç¾¤é‡Œçš„å‰è¾ˆå•†é‡ä¸€ä¸‹è§£å†³æ–¹æ¡ˆã€‚</p><blockquote><p>Reference:
<a href="https://github.com/felixonmars/archriscv-packages/pull/559" target="_blank" rel="noopener noreferrer">https://github.com/felixonmars/archriscv-packages/pull/559</a></p></blockquote><h2 class="anchor anchorWithStickyNavbar_y2LR" id="å¦‚ä½•å¿«æ·ç”Ÿæˆ-sum">å¦‚ä½•å¿«æ·ç”Ÿæˆ sum<a class="hash-link" href="#å¦‚ä½•å¿«æ·ç”Ÿæˆ-sum" title="Direct link to heading">â€‹</a></h2><p>ç”¨ <a href="https://archlinux.org/packages/community/x86_64/pacman-contrib/" target="_blank" rel="noopener noreferrer">updpkgsums</a></p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="ä¿®ä»£ç ä¼˜å…ˆè¿˜æ˜¯æ”¹ç¼–è¯‘-flag-ä¼˜å…ˆ">ä¿®ä»£ç ä¼˜å…ˆè¿˜æ˜¯æ”¹ç¼–è¯‘ flag ä¼˜å…ˆï¼Ÿ<a class="hash-link" href="#ä¿®ä»£ç ä¼˜å…ˆè¿˜æ˜¯æ”¹ç¼–è¯‘-flag-ä¼˜å…ˆ" title="Direct link to heading">â€‹</a></h2><p>ä¼˜å…ˆä¿®ä»£ç ã€‚</p><blockquote><p>å‚è€ƒï¼š
<a href="https://build.opensuse.org/package/view_file/devel:ARM:Factory:Contrib:ILP32/presage/presage-0.9.1-gcc11.patch?expand=0" target="_blank" rel="noopener noreferrer">https://build.opensuse.org/package/view_file/devel:ARM:Factory:Contrib:ILP32/presage/presage-0.9.1-gcc11.patch?expand=0</a></p></blockquote><h2 class="anchor anchorWithStickyNavbar_y2LR" id="noqemu">noqemu<a class="hash-link" href="#noqemu" title="Direct link to heading">â€‹</a></h2><p>èƒ½ patch ä½¿ç”¨ generic åˆ†æ”¯çš„å°±ä¸è¦ noqemu</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="rust">Rust<a class="hash-link" href="#rust" title="Direct link to heading">â€‹</a></h2><p>å‚è€ƒ <a href="/docs/record/rust-related"><em>Rust ç›¸å…³çš„ä¸€äº›è®°å½•</em></a></p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="sse-related-issue">SSE Related issue<a class="hash-link" href="#sse-related-issue" title="Direct link to heading">â€‹</a></h2><p>Disable the build flag:</p><div class="codeBlockContainer_J+bg language-diff theme-code-block"><div style="color:#393A34;background-color:#f6f8fa" class="codeBlockTitle_oQzk">riscv64.patch</div><div class="codeBlockContent_csEI diff"><pre tabindex="0" class="prism-code language-diff codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token inserted-sign inserted prefix inserted" style="color:#36acaa">+</span><span class="token inserted-sign inserted line" style="color:#36acaa">    -DOCIO_USE_SSE=OFF</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Delete build flag:</p><div class="codeBlockContainer_J+bg language-diff theme-code-block"><div style="color:#393A34;background-color:#f6f8fa" class="codeBlockTitle_oQzk">riscv64.patch</div><div class="codeBlockContent_csEI diff"><pre tabindex="0" class="prism-code language-diff codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">build() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">  cd SuiteSparse-$pkgver</span><br></span><span class="token-line" style="color:#393A34"><span class="token unchanged line"></span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token deleted-sign deleted prefix deleted" style="color:#d73a49">-</span><span class="token deleted-sign deleted line" style="color:#d73a49">  BLAS=-lblas LAPACK=-llapack TBB=-ltbb SPQR_CONFIG=-DHAVE_TBB MY_METIS_LIB=/usr/lib/libmetis.so make</span><br></span><span class="token-line" style="color:#393A34"><span class="token deleted-sign deleted line" style="color:#d73a49"></span><span class="token inserted-sign inserted prefix inserted" style="color:#36acaa">+</span><span class="token inserted-sign inserted line" style="color:#36acaa">  BLAS=-lblas LAPACK=-llapack MY_METIS_LIB=/usr/lib/libmetis.so make</span><br></span><span class="token-line" style="color:#393A34"><span class="token inserted-sign inserted line" style="color:#36acaa"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_y2LR" id="go">Go<a class="hash-link" href="#go" title="Direct link to heading">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_y2LR" id="patch-go-dep">Patch <code>go dep</code><a class="hash-link" href="#patch-go-dep" title="Direct link to heading">â€‹</a></h3><div class="codeBlockContainer_J+bg language-bash theme-code-block"><div style="color:#393A34;background-color:#f6f8fa" class="codeBlockTitle_oQzk">console</div><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">go mod edit -replace github.com/prometheus/client_golang</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">github.com/prometheus/client_golang@efe7aa7</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">go mod download github.com/prometheus/client_golang</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># è¿™ä¸ªæ˜¯æ ¹æ®ä¸åŠ  go get çš„æŠ¥é”™æç¤ºæ¥æ·»åŠ çš„</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># æ²¡æŠ¥é”™å¯ä»¥ä¸ç”¨åŠ ï¼Œæ³¨æ„è¦å»æ‰ç‰ˆæœ¬å·ï¼ˆ@ åé¢çš„éƒ¨åˆ†ï¼‰</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">go get github.com/prometheus/client_golang/prometheus</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">go generate  </span><span class="token comment" style="color:#999988;font-style:italic"># if necessary</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">cd</span><span class="token plain"> cmd/traefik</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">go build</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><blockquote><p>å…·ä½“å‚è€ƒï¼š
<a href="https://github.com/felixonmars/archriscv-packages/pull/346/files" target="_blank" rel="noopener noreferrer">https://github.com/felixonmars/archriscv-packages/pull/346/files</a></p></blockquote><h3 class="anchor anchorWithStickyNavbar_y2LR" id="ç»™-go-åŒ…çš„ä¾èµ–çš„ä¾èµ–æ‰“patchçš„æ­£ç¡®æ–¹å¼">ç»™ go åŒ…çš„ä¾èµ–ï¼ˆçš„ä¾èµ–ï¼‰æ‰“patchçš„æ­£ç¡®æ–¹å¼<a class="hash-link" href="#ç»™-go-åŒ…çš„ä¾èµ–çš„ä¾èµ–æ‰“patchçš„æ­£ç¡®æ–¹å¼" title="Direct link to heading">â€‹</a></h3><p>Go æ¯”è¾ƒç‰¹æ®Šï¼ŒGo æ˜¯åœ¨ build çš„æ—¶å€™ installã€‚
å‡è®¾æœ‰ä¸€ç³»åˆ—çš„ä¾èµ–é“¾ï¼š<code>a-&gt;b-&gt;c-&gt;d-&gt;e</code>ã€‚
å¦‚æœéœ€è¦ä¿® dï¼Œåˆ™ bcd éƒ½éœ€è¦ forkï¼Œä¿®å¥½ d ä¹‹å bc æ”¹ä¾èµ–ã€‚</p><p>Go è¿˜å¯ä»¥åœ¨ go.mod é‡Œç”¨ replace è¯­æ³•æ¥æ›¿æ¢ä¾èµ–ï¼š</p><div class="codeBlockContainer_J+bg language-text theme-code-block"><div style="color:#393A34;background-color:#f6f8fa" class="codeBlockTitle_oQzk">go.mod</div><div class="codeBlockContent_csEI text"><pre tabindex="0" class="prism-code language-text codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">replace github.com/creack/goselect =&gt; github.com/creack/goselect v0.1.2</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><blockquote><p>å…·ä½“å‚è€ƒï¼š
<a href="https://github.com/felixonmars/archriscv-packages/pull/387/commits/ad0e66c31b21efd93fff93be8cce5b9e13b59953" target="_blank" rel="noopener noreferrer">https://github.com/felixonmars/archriscv-packages/pull/387/commits/ad0e66c31b21efd93fff93be8cce5b9e13b59953</a></p></blockquote><h3 class="anchor anchorWithStickyNavbar_y2LR" id="ç¼–è¯‘-golang-åŒ…çš„æ—¶å€™ç»å¸¸å¡æ­»">ç¼–è¯‘ golang åŒ…çš„æ—¶å€™ç»å¸¸å¡æ­»<a class="hash-link" href="#ç¼–è¯‘-golang-åŒ…çš„æ—¶å€™ç»å¸¸å¡æ­»" title="Direct link to heading">â€‹</a></h3><p>QEMU çš„é”…ï¼Œç›´æ¥æ€æ‰é‡æ–°å¼€å§‹ã€‚</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="ç‰ˆæœ¬å·">ç‰ˆæœ¬å·<a class="hash-link" href="#ç‰ˆæœ¬å·" title="Direct link to heading">â€‹</a></h2><p>ç‰ˆæœ¬å·ä¸è¦è¶…è¿‡ä¸»çº¿ï¼Œå°½é‡ä»¥å‚¬æ›´ä¸ºä¸»ã€‚
å¦‚æœå®åœ¨ä¸è¡Œå°±åŠ ä¸€è¡Œæ³¨é‡Šï¼Œæä¸€ä¸‹ä¸Šæ¸¸çš„è¿›åº¦ï¼Œè®©ä»¥åç»´æŠ¤çš„äººæœ‰ä¸ªå‚è€ƒã€‚</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="å¾ªç¯ä¾èµ–">å¾ªç¯ä¾èµ–<a class="hash-link" href="#å¾ªç¯ä¾èµ–" title="Direct link to heading">â€‹</a></h2><p>æœ‰äº›åŒ…å¯ä»¥ä¸€èµ·æ‰“ï¼Œä½†åœ¨çŠ¶æ€é¡µä¸Šæ˜¾ç¤ºäº’ç›¸ç¼ºäº†å¯¹æ–¹ï¼Œè¿™ç§éœ€è¦ bootstrapã€‚</p><blockquote><p>è¯¦ç»†å‚è€ƒ ghc bootstrap Patch:
<a href="https://github.com/felixonmars/archriscv-packages/pull/17/commits/36279fff5314fbcd212549ede73db5257ef10b1d" target="_blank" rel="noopener noreferrer">https://github.com/felixonmars/archriscv-packages/pull/17/commits/36279fff5314fbcd212549ede73db5257ef10b1d</a></p></blockquote><h2 class="anchor anchorWithStickyNavbar_y2LR" id="intel-related">Intel related<a class="hash-link" href="#intel-related" title="Direct link to heading">â€‹</a></h2><p>Intel çš„ä¸€äº›åŒ…ï¼Œæ²¡ç•™ Generic å®ç°ï¼Œåªæœ‰ x86 simd çš„ï¼Œæ¯”å¦‚ hyperscanï¼Œ
è¿™ç§åŒ…å°±ç›´æ¥è·³è¿‡ä¸ç®¡äº†ã€‚</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="qmake">Qmake<a class="hash-link" href="#qmake" title="Direct link to heading">â€‹</a></h2><p>ä½¿ç”¨ qmake æ„å»ºçš„åŒ…æ„å»ºæ—¶æç¤º <code>Could not find qmake spec &#x27;default&#x27;.</code></p><p>è¿™ç§æƒ…å†µç›®å‰éœ€è¦å»æ¿å­ä¸Šæ‰“åŒ…ã€‚</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="xx-is-not-available-for-the-riscv64-architecture">XX is not available for the &#x27;riscv64&#x27; architecture<a class="hash-link" href="#xx-is-not-available-for-the-riscv64-architecture" title="Direct link to heading">â€‹</a></h2><p>æœ‰äº›åŒ…éœ€è¦ä¿®æ”¹ arch çš„å€¼æ‰èƒ½ç¼–è¯‘ï¼Œ
å¦åˆ™ä¼šé‡åˆ° <code>==&gt; ERROR: cern-vdt is not available for the &#x27;riscv64&#x27; architecture</code>ã€‚</p><p>ä½†è¯·ä¸è¦æŠŠ arch æ”¹ä¸º anyï¼Œè¿™é‡Œå¡« <code>riscv64</code> å³å¯ã€‚</p><p>ä½ å¯ä»¥ç”¨ sed å¿«é€Ÿæ›¿æ¢å€¼ï¼š</p><div class="codeBlockContainer_J+bg language-console theme-code-block"><div style="color:#393A34;background-color:#f6f8fa" class="codeBlockTitle_oQzk">console</div><div class="codeBlockContent_csEI console"><pre tabindex="0" class="prism-code language-console codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain"># sed doesn&#x27;t support Extend RegEx(ERE) by default, need `-E` option to manually enable</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sed -i -E &quot;s/arch=\(&#x27;?x86_64&#x27;?\)/arch=\(&#x27;riscv64&#x27;\)/&quot; PKGBUILD</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>è¿˜æœ‰è¯·æ³¨æ„
<a href="/docs/guide/PR-guide#%E4%B8%8D%E8%A6%81%E6%8F%90%E4%BA%A4-archany">ä¸è¦æäº¤ä¿®æ”¹åçš„ arch</a></p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="msse">msse<a class="hash-link" href="#msse" title="Direct link to heading">â€‹</a></h2><p>Error: <code>c++: error: unrecognized command-line option &#x27;-msse&#x27;</code></p><p>è¿™æ˜¯å› ä¸º -msse è¿™ä¸ªç¼–è¯‘é€‰é¡¹æš‚æ—¶è¿˜ä¸æ”¯æŒ <code>x86_64</code> ä»¥å¤–çš„ Archï¼Œ
ä½ éœ€è¦æŸ¥çœ‹ä¸€ä¸‹è¿™ä¸ªé¡¹ç›®çš„ CMakeList é€‰é¡¹ï¼Œæš‚æ—¶æŠŠä»–å…³é—­ã€‚</p><p>æ¯”å¦‚ <code>cmake -DSSE=OFF</code>ã€‚</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="unknown-public-key-a-za-z0-9">Unknown public key <code>[a-zA-Z0-9]+</code><a class="hash-link" href="#unknown-public-key-a-za-z0-9" title="Direct link to heading">â€‹</a></h2><p>è¿™æ˜¯å› ä¸ºæœ¬åœ°çš„ gpg æ•°æ®åº“æ²¡æœ‰è¿™ä¸ªå¼€å‘è€…çš„å…¬é’¥ã€‚ä½ å¯ä»¥ç”¨å‘½ä»¤
<code>gpg --recv-key keyid</code> ä¸‹è½½å¹¶å¯¼å…¥è¿™ä¸ª keyã€‚</p><hr><p>å¦‚æœé‡åˆ°äº† <code>gpg: keyserver receive failed: No data</code> è¿™æ ·çš„é”™è¯¯ï¼Œ
å¤§æ¦‚ç‡æ˜¯ keyserver è¢«æ©„æ¦„äº†ã€‚å»ºè®®ç›´æ¥å»é¡¹ç›®ä¸»é¡µæ‰¾ä»–ä»¬çš„ public key
æ‰‹åŠ¨å¯¼å…¥ã€‚</p><blockquote><p>sks pool å› ä¸ºæ˜¯å•å¢çš„ï¼Œæ— æ³•æ»¡è¶³ GDPR å¯¹è¢«é—å¿˜æƒçš„è§„å®šï¼Œ
è¢«æ¬§ç›Ÿæ³•å¾‹æ©„æ¦„äº†ã€‚</p></blockquote><hr><p>å¦‚æœå®åœ¨æ˜¯æ‰¾ä¸åˆ° keyï¼Œå¯ä»¥ç”¨å‚æ•° <code>--skippgpcheck</code> æš‚æ—¶è·³è¿‡æ£€æŸ¥ã€‚</p><p>æˆ–è€…å¯ä»¥å‚è€ƒè¿™ä¸ªï¼š
<a href="https://github.com/archlinuxcn/lilac/blob/master/recv_gpg_keys" target="_blank" rel="noopener noreferrer">https://github.com/archlinuxcn/lilac/blob/master/recv_gpg_keys</a></p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="electron">Electron<a class="hash-link" href="#electron" title="Direct link to heading">â€‹</a></h2><p>v8 ç‰ˆæœ¬ä½äº 9.0 çš„å°±ä¸ç”¨ä¿®äº†ï¼Œä» 9.0 å¼€å§‹æœ‰å®éªŒæ€§çš„ risc-v æ”¯æŒã€‚</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="node-sass">node-sass<a class="hash-link" href="#node-sass" title="Direct link to heading">â€‹</a></h2><p>node-sass v6 å°±æ˜¯ä¸æ”¯æŒ node v17 çš„ï¼Œnode-sass å¯¹ njs v17 çš„æ”¯æŒå§‹äºç‰ˆæœ¬ 7.0.0ï¼Œ
6.x æ”¯æŒçš„ njs versionï¼š12, 14, 15, 16ï¼Œæ‰€ä»¥è¦ä¹ˆå°±æŠŠ dependency ä» nodejs æ”¹æˆ nodejs-lts-galliumï¼Œ
è¦ä¹ˆå°±å‚¬ä¸Šæ¸¸æ›´æ–° package.json é‡Œ node-sass çš„ç‰ˆæœ¬ï¼Œwhich is nonsenseï¼Œå› ä¸ºå¤§ç‰ˆæœ¬å·çš„æ›´æ–°å¾€å¾€å¸¦æ¥ä¸å…¼å®¹ã€‚</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="å…³äº-upstream">å…³äº upstream<a class="hash-link" href="#å…³äº-upstream" title="Direct link to heading">â€‹</a></h2><p>å¦‚æœä¸Šæ¸¸çš„ maintainer æ˜¯è‚¥çŒ«çš„è¯ï¼Œå¯ä»¥ç›´æ¥åœ¨ç¾¤é‡Œ @ è‚¥çŒ«ã€‚</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="python-2to3">Python 2to3<a class="hash-link" href="#python-2to3" title="Direct link to heading">â€‹</a></h2><p>Python çš„åŒ…ä¸ç®¡ major version éƒ½è¦è·‘ä¸€æ¬¡ 2to3ã€‚</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="æµ‹è¯•">æµ‹è¯•<a class="hash-link" href="#æµ‹è¯•" title="Direct link to heading">â€‹</a></h2><p>å¦‚æœæœ‰çš„åŒ…ä¸åœ¨ä¹æµ‹è¯•æ˜¯å¦é€šè¿‡ï¼Œæ¯”å¦‚ <code>test || echo</code>ï¼Œé‚£å°±ç›´æ¥æŠŠæµ‹è¯•æ³¨é‡Šæ‰ã€‚</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="è®¿é—®ä¸€äº›ä¼šåœ¨ç¼–è¯‘æœŸè¢«åˆ é™¤çš„æ–‡ä»¶">è®¿é—®ä¸€äº›ä¼šåœ¨ç¼–è¯‘æœŸè¢«åˆ é™¤çš„æ–‡ä»¶<a class="hash-link" href="#è®¿é—®ä¸€äº›ä¼šåœ¨ç¼–è¯‘æœŸè¢«åˆ é™¤çš„æ–‡ä»¶" title="Direct link to heading">â€‹</a></h2><p>æœ‰ä¸€ä¸ªæ¯”è¾ƒè„çš„åšæ³•ï¼šå¾€ PKGBUILD é‡Œå¡ä¸€ä¸ª bashï¼Œç„¶åå°±ç”¨è¿™ä¸ª subshell æ¥äº¤äº’ã€‚</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="gcc-nostdlib">gcc nostdlib<a class="hash-link" href="#gcc-nostdlib" title="Direct link to heading">â€‹</a></h2><p><code>-nostdlib</code> ä¼šè¦†ç›– <code>-pthread</code></p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="glibc-optimization">glibc optimization<a class="hash-link" href="#glibc-optimization" title="Direct link to heading">â€‹</a></h2><div class="codeBlockContainer_J+bg language-text theme-code-block"><div class="codeBlockContent_csEI text"><pre tabindex="0" class="prism-code language-text codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">error: glibc cannot be compiled without optimization</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>solution: åŠ ä¸Š <code>-O1</code></p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="patch-hunk-offset">patch hunk offset<a class="hash-link" href="#patch-hunk-offset" title="Direct link to heading">â€‹</a></h2><p><strong>Q:</strong> å¹³æ—¶æ›´æ–° patch çš„æ—¶å€™ï¼Œå¦‚æœæœ‰ä»£ç çš„ patch hunk é£˜äº†ï¼Œèƒ½æ‰“ä¸Šä½†æ˜¯æœ‰ offsetï¼Œéœ€è¦
æŠŠ patch æ›´æ–°æˆæœ€æ–°çš„è¡Œå·å—ï¼Ÿ</p><p><strong>A:</strong> ä¸éœ€è¦</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/Avimitin/RISC-V_Daily_Notes/docs/record/collection.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_mS5F" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_mt2f"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/guide/bug-report"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">å¦‚ä½•ç»™ Arch æŠ¥ BUG</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/record/resources"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">ä¸€äº›å‚è€ƒèµ„æ–™</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_vrFS thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#é˜¿é‡Œäº‘ä¸Šé‡åˆ°-sigsegv" class="table-of-contents__link toc-highlight">é˜¿é‡Œäº‘ä¸Šé‡åˆ° sigsegv</a></li><li><a href="#æŠŠ-jemallocator-æ¢æˆ-tikv-jemallocator" class="table-of-contents__link toc-highlight">æŠŠ jemallocator æ¢æˆ tikv-jemallocator</a></li><li><a href="#executable-wasm-ld-doesnt-exist-stuck" class="table-of-contents__link toc-highlight">Executable &quot;wasm-ld&quot; doesn&#39;t exist! (STUCK)</a></li><li><a href="#pthread-related-issue" class="table-of-contents__link toc-highlight">pthread related issue</a></li><li><a href="#gcc-atomic" class="table-of-contents__link toc-highlight">gcc atomic</a></li><li><a href="#-fno-common" class="table-of-contents__link toc-highlight">-fno-common</a></li><li><a href="#-wno-format" class="table-of-contents__link toc-highlight">-Wno-format</a></li><li><a href="#-werrorformat-security" class="table-of-contents__link toc-highlight">-Werror=format-security</a></li><li><a href="#å¦‚ä½•å¿«æ·ç”Ÿæˆ-sum" class="table-of-contents__link toc-highlight">å¦‚ä½•å¿«æ·ç”Ÿæˆ sum</a></li><li><a href="#ä¿®ä»£ç ä¼˜å…ˆè¿˜æ˜¯æ”¹ç¼–è¯‘-flag-ä¼˜å…ˆ" class="table-of-contents__link toc-highlight">ä¿®ä»£ç ä¼˜å…ˆè¿˜æ˜¯æ”¹ç¼–è¯‘ flag ä¼˜å…ˆï¼Ÿ</a></li><li><a href="#noqemu" class="table-of-contents__link toc-highlight">noqemu</a></li><li><a href="#rust" class="table-of-contents__link toc-highlight">Rust</a></li><li><a href="#sse-related-issue" class="table-of-contents__link toc-highlight">SSE Related issue</a></li><li><a href="#go" class="table-of-contents__link toc-highlight">Go</a><ul><li><a href="#patch-go-dep" class="table-of-contents__link toc-highlight">Patch <code>go dep</code></a></li><li><a href="#ç»™-go-åŒ…çš„ä¾èµ–çš„ä¾èµ–æ‰“patchçš„æ­£ç¡®æ–¹å¼" class="table-of-contents__link toc-highlight">ç»™ go åŒ…çš„ä¾èµ–ï¼ˆçš„ä¾èµ–ï¼‰æ‰“patchçš„æ­£ç¡®æ–¹å¼</a></li><li><a href="#ç¼–è¯‘-golang-åŒ…çš„æ—¶å€™ç»å¸¸å¡æ­»" class="table-of-contents__link toc-highlight">ç¼–è¯‘ golang åŒ…çš„æ—¶å€™ç»å¸¸å¡æ­»</a></li></ul></li><li><a href="#ç‰ˆæœ¬å·" class="table-of-contents__link toc-highlight">ç‰ˆæœ¬å·</a></li><li><a href="#å¾ªç¯ä¾èµ–" class="table-of-contents__link toc-highlight">å¾ªç¯ä¾èµ–</a></li><li><a href="#intel-related" class="table-of-contents__link toc-highlight">Intel related</a></li><li><a href="#qmake" class="table-of-contents__link toc-highlight">Qmake</a></li><li><a href="#xx-is-not-available-for-the-riscv64-architecture" class="table-of-contents__link toc-highlight">XX is not available for the &#39;riscv64&#39; architecture</a></li><li><a href="#msse" class="table-of-contents__link toc-highlight">msse</a></li><li><a href="#unknown-public-key-a-za-z0-9" class="table-of-contents__link toc-highlight">Unknown public key <code>[a-zA-Z0-9]+</code></a></li><li><a href="#electron" class="table-of-contents__link toc-highlight">Electron</a></li><li><a href="#node-sass" class="table-of-contents__link toc-highlight">node-sass</a></li><li><a href="#å…³äº-upstream" class="table-of-contents__link toc-highlight">å…³äº upstream</a></li><li><a href="#python-2to3" class="table-of-contents__link toc-highlight">Python 2to3</a></li><li><a href="#æµ‹è¯•" class="table-of-contents__link toc-highlight">æµ‹è¯•</a></li><li><a href="#è®¿é—®ä¸€äº›ä¼šåœ¨ç¼–è¯‘æœŸè¢«åˆ é™¤çš„æ–‡ä»¶" class="table-of-contents__link toc-highlight">è®¿é—®ä¸€äº›ä¼šåœ¨ç¼–è¯‘æœŸè¢«åˆ é™¤çš„æ–‡ä»¶</a></li><li><a href="#gcc-nostdlib" class="table-of-contents__link toc-highlight">gcc nostdlib</a></li><li><a href="#glibc-optimization" class="table-of-contents__link toc-highlight">glibc optimization</a></li><li><a href="#patch-hunk-offset" class="table-of-contents__link toc-highlight">patch hunk offset</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/intro">Documents</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/felixonmars/archriscv-packages" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2022 Avimitin, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.4a9f3433.js"></script>
<script src="/assets/js/main.760832d3.js"></script>
</body>
</html>